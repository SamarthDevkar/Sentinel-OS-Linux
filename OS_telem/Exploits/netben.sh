#!/bin/bash

# Function to display the RPI's IP address
get_ip_address() {
    local ip_address
    ip_address=$(hostname -I)
    echo "Raspberry Pi IP Address: $ip_address"
}

# Function to ping a specific IP address (e.g., 192.168.1.227)
ping_ip() {
    local ip_address="192.168.1.235"
    echo "Pinging IP address $ip_address..."
    if ping -c 3 $ip_address; then
        echo "IP address $ip_address is reachable."
    else
        echo "IP address $ip_address is not reachable."
    fi
}

# Function to check if a specific port on a remote host is reachable
check_port() {
    local host="192.168.1.235"  # Replace with the host you want to check
    local port=80             # Replace with the port you want to check

    echo "Checking if port $port is reachable on host $host..."
    if nc -z -w5 $host $port; then
        echo "Port $port on host $host is reachable."
    else
        echo "Port $port on host $host is not reachable."
    fi
}

# Function to download a file from a given URL and delete it
download_and_delete() {
    local url="https://filesamples.com/samples/document/txt/sample3.txt" 
    local filename="sample3.txt"

    echo "Downloading file from $url..."
    wget -q "$url"

    if [ -e "$filename" ]; then
        echo "File downloaded successfully."
        rm "$filename"  # Delete the downloaded file
        echo "Deleted the downloaded file."
    else
        echo "Failed to download the file."
    fi
}

# Main loop
while true; do
    clear  # Clear the terminal screen for a clean display

    # Display the RPI's IP address
    get_ip_address

    # Ping a specific IP address
    ping_ip

    # Check if a specific port on a remote host is reachable
    check_port

    # Download a file from a given URL and delete it
    download_and_delete

    # Sleep for a few seconds before the next iteration (adjust as needed)
    sleep 10
done
